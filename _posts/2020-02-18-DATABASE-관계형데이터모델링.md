---
title: 관계형 데이터 모델링
tag: SQL
---

## 업무 파악



## 개념적 데이터 모델링

> ER 다이어그램

## 논리적 데이터 모델링

_이거 스키마 단계에 관한 거 아니냐?_

> Mapping Rule

|   모델    |  대응  |
| :-------: | :----: |
|  Entity   | Table  |
| Attribute | Column |
| Relation  | PK,FK  |



### 테이블과 컬럼 생성

> ER 다이어그램을 테이블로 만드는 과정

_ER Master_ 이클립스 플러그인

1. 테이블을 만듬

2. PK키가 없는 테이블부터 만드는 것이 좋음

3. Relationship을 따질 때는 PK,FK를 연결하는 것으로 관계를 따져보면 쉬움. n: ?

   1:1관계는 누구에게 PK을 주어야 하는가?

   부모-자식 구분으로 할당

> 1:N의 관계

> N:M

id를 비교해보고 중복이 있으면 안됨>바로 이어 붙이기가 불가능

중재자: mapping table이 필요



### 정규화

Normalization

+ 단계적으로 중복의 처리

#### 제1 정규화

First Normal Form: Atomic columns

각 행, 칼럼의 값이 원자적.. 독립적이어야 한다.

N:M 관계에서 Mapping table로 해결

#### 제 2 정규화

Seconde Normal Form: No partial dependencies

부분 종속성이 없어야 한다.

=중복 키가 없어야 한다.

전체 종속 안에서 부분 종속을 따로 쪼갬.

#### 제 3 정규화

Third Normal Form: No transitive dependencies

이행적 종속성

=테이블 내 종속의 종속된 정보를 쪼갬

서로 종속적인 성격을 가지는 값을 쪼개는 것임.(변수 이름으로 판별가능함)
그리고 id 값을 주고 종속

> 절차에 맞춰서 중복을 제거하는 과정임.
> 산업적으로 쓰이는 것은 제 3정규형까지임.



## 물리적 데이터 모델링

이상적인 표를 현실적인 표로 만드는 과정 

_성능_

find slow query

느려지는 지점을 찾고 해결해야 함.

> 역정규화

이상적인 표를 수정하는 것

다른 방법을 먼저 시도해보고 마지막 수단으로 사용

> index

읽기 굿, 쓰기 절망적

> application

캐시를 이용

   

### 역정규화

denormaliztion

성능을 위해 모델을 수정

> write vs read 반비례 성격

why? 

읽을 때 `join`을 쓰기 때문에 

> 상황판단, 그냥 그냥? 절차적이지 않음.
>
> 최선의 결과를 내기만하면 됨.

#### 컬럼을 조작해서 join을 줄이기

굉장히 리드해서 조회가 많아서 서비스가 나쁘다면 중복을 허용.

결국 너무 쪼개면 리드에 문제가 되니까... 

많이 참조하거나 불러오는 데이터면 중복도 나쁘지 않은 선택이다?

> 중복의 수정 문제는?

복잡도가 증가, 고장 문제 

   

#### 컬럼을 조작해서 계산작업을 줄이기

파생 컬럼의 형성

#### 표를 쪼개기

컬럼을 기준으로 테이블을 분리

>  컬럼 기준

데이터의 크기에 따라서 나누는 것에 대해 속도가 다름.

> 샤딩?

여러대의 컴퓨터로 계산.
최후의 수단? 기술적으로 어려움

> 처리량을 분산

#### 관계의 역정규화

_조인을 줄여서 지름길을 만든다._

특정 저자의 태그 아이디와 태그 명을 조회한다.

조인이 많은 데이터를 따로 분리하면 데이터를 빠르게 조회 가능하고 시스템적으로 양호.



_다 이런 과정을 자동화? 도움을 주는 도구는 찾아보면 존재하는구나_

